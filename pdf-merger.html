<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Merger & Splitter | Combine & Split PDF Files</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4a6bff;
            --secondary-color: #6c5ce7;
            --accent-color: #00cec9;
            --danger-color: #ff7675;
            --success-color: #00b894;
            --light-color: #f8f9fa;
            --dark-color: #2d3436;
            --gray-color: #636e72;
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            --radius: 12px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark-color);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        
        h1 {
            font-size: 2.8rem;
            color: var(--dark-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .header-icon {
            color: var(--primary-color);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: var(--gray-color);
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .tool-selector {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .tool-tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 4px solid transparent;
        }
        
        .tool-tab:hover {
            background-color: #f8f9fa;
        }
        
        .tool-tab.active {
            background-color: #f0f4ff;
            border-bottom: 4px solid var(--primary-color);
        }
        
        .tab-icon {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .tab-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .tab-desc {
            font-size: 0.95rem;
            color: var(--gray-color);
        }
        
        .tool-section {
            display: none;
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 40px;
            margin-bottom: 40px;
        }
        
        .tool-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            font-size: 1.8rem;
            color: var(--dark-color);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Upload Area Styling */
        .upload-area {
            border: 3px dashed var(--primary-color);
            border-radius: var(--radius);
            padding: 60px 20px;
            text-align: center;
            margin-bottom: 30px;
            background-color: #f8faff;
            transition: all 0.3s;
            position: relative;
        }
        
        .upload-area:hover {
            background-color: #f0f4ff;
            border-color: var(--secondary-color);
        }
        
        .upload-area.drag-over {
            background-color: #e8f0ff;
            border-color: var(--accent-color);
        }
        
        .upload-icon {
            font-size: 4rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .upload-text {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--dark-color);
        }
        
        .upload-btn {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 14px 35px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: transform 0.3s, box-shadow 0.3s;
            font-weight: 600;
        }
        
        .upload-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(74, 107, 255, 0.3);
        }
        
        .file-input {
            display: none;
        }
        
        .file-list {
            margin-top: 30px;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        
        .file-item:hover {
            background-color: #f0f3ff;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }
        
        .file-icon {
            font-size: 1.8rem;
            color: var(--danger-color);
        }
        
        .file-name {
            font-weight: 600;
            word-break: break-all;
        }
        
        .file-size {
            color: var(--gray-color);
            font-size: 0.9rem;
        }
        
        .file-actions {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .remove-btn {
            color: var(--danger-color);
        }
        
        .remove-btn:hover {
            background-color: rgba(255, 118, 117, 0.1);
        }
        
        .move-btn {
            color: var(--gray-color);
            cursor: move;
        }
        
        /* Splitter Options */
        .options-section {
            background-color: #f8faff;
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .option-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .split-options {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .split-option {
            flex: 1;
            min-width: 200px;
        }
        
        .option-btn {
            width: 100%;
            padding: 20px;
            background-color: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }
        
        .option-btn:hover {
            border-color: var(--primary-color);
            background-color: #f8faff;
        }
        
        .option-btn.active {
            border-color: var(--primary-color);
            background-color: #e8f0ff;
        }
        
        .option-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .option-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .option-desc {
            font-size: 0.9rem;
            color: var(--gray-color);
        }
        
        .range-container {
            margin-top: 20px;
        }
        
        .range-inputs {
            display: flex;
            gap: 20px;
            align-items: center;
            margin-top: 15px;
        }
        
        .range-input {
            flex: 1;
        }
        
        .range-input label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .range-input input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .range-input input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .page-preview {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
            display: none;
        }
        
        .page-preview.show {
            display: block;
        }
        
        .preview-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--dark-color);
        }
        
        .page-markers {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .page-marker {
            padding: 8px 15px;
            background-color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid #ddd;
        }
        
        .page-marker.split {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        
        .primary-btn {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .primary-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(74, 107, 255, 0.3);
        }
        
        .secondary-btn {
            background-color: #f8f9fa;
            color: var(--dark-color);
            border: 2px solid #ddd;
            padding: 16px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .secondary-btn:hover {
            background-color: #f0f3ff;
            border-color: var(--primary-color);
        }
        
        /* Results Section */
        .results-section {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 40px;
            margin-top: 40px;
            display: none;
        }
        
        .results-section.show {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        .results-title {
            font-size: 1.8rem;
            color: var(--dark-color);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .result-info {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .info-box {
            flex: 1;
            min-width: 200px;
            text-align: center;
            padding: 25px;
            background-color: #f8faff;
            border-radius: 10px;
        }
        
        .info-label {
            font-size: 1rem;
            color: var(--gray-color);
            margin-bottom: 10px;
        }
        
        .info-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .download-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .download-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px 25px;
            background-color: #f8f9fa;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }
        
        .download-btn:hover {
            background-color: #f0f3ff;
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .download-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .download-icon {
            font-size: 1.8rem;
            color: var(--primary-color);
        }
        
        .download-text {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .download-size {
            color: var(--gray-color);
            font-size: 0.9rem;
        }
        
        .download-arrow {
            color: var(--primary-color);
            font-size: 1.2rem;
        }
        
        /* Loader */
        .loader {
            text-align: center;
            padding: 40px;
            display: none;
        }
        
        .loader.show {
            display: block;
        }
        
        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loader-text {
            font-size: 1.2rem;
            color: var(--dark-color);
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 30px;
            color: var(--dark-color);
            margin-top: 40px;
            font-size: 0.95rem;
        }
        
        .footer-note {
            max-width: 800px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .tool-selector {
                flex-direction: column;
            }
            
            .tool-section {
                padding: 25px;
            }
            
            .split-options {
                flex-direction: column;
            }
            
            .range-inputs {
                flex-direction: column;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .primary-btn, .secondary-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-file-pdf header-icon"></i> PDF Merger & Splitter</h1>
            <p class="subtitle">Combine multiple PDFs into one document or split large PDFs into smaller files. Fast, secure, and completely free!</p>
        </header>
        
        <div class="tool-selector">
            <div class="tool-tab active" data-tool="merger">
                <div class="tab-icon"><i class="fas fa-object-group"></i></div>
                <div class="tab-title">Merge PDFs</div>
                <div class="tab-desc">Combine multiple PDF files into one</div>
            </div>
            <div class="tool-tab" data-tool="splitter">
                <div class="tab-icon"><i class="fas fa-cut"></i></div>
                <div class="tab-title">Split PDF</div>
                <div class="tab-desc">Split a large PDF into smaller files</div>
            </div>
        </div>
        
        <!-- PDF Merger Tool -->
        <div class="tool-section active" id="merger-section">
            <h2 class="section-title"><i class="fas fa-object-group"></i> Merge PDF Files</h2>
            
            <div class="upload-area" id="merge-upload-area">
                <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                <p class="upload-text">Drag & drop PDF files here or click to browse</p>
                <p style="color: var(--gray-color); margin-bottom: 20px;">Upload multiple PDFs to merge them into a single document</p>
                <input type="file" id="merge-file-input" class="file-input" accept=".pdf" multiple>
                <label for="merge-file-input" class="upload-btn">
                    <i class="fas fa-plus-circle"></i> Add PDF Files
                </label>
                <div class="file-info" style="margin-top: 20px; color: var(--gray-color);">
                    <i class="fas fa-info-circle"></i> You can select multiple files at once
                </div>
            </div>
            
            <div class="file-list" id="merge-file-list">
                <!-- Files will be added here dynamically -->
            </div>
            
            <div class="options-section">
                <h3 class="option-title"><i class="fas fa-sliders-h"></i> Merge Options</h3>
                
                <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 200px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Output Filename</label>
                        <input type="text" id="output-filename" placeholder="merged-document.pdf" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                    </div>
                    
                    <div style="flex: 1; min-width: 200px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Page Order</label>
                        <select id="page-order" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                            <option value="sequential">Sequential (File 1, then File 2)</option>
                            <option value="alternate">Alternate Pages</option>
                            <option value="reverse">Reverse Order</option>
                        </select>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" id="remove-blank-pages" style="width: 18px; height: 18px;">
                        <span>Remove blank pages from merged document</span>
                    </label>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="primary-btn" id="merge-btn">
                    <i class="fas fa-object-group"></i> Merge PDFs Now
                </button>
                <button class="secondary-btn" id="clear-merge-btn">
                    <i class="fas fa-trash-alt"></i> Clear All Files
                </button>
            </div>
        </div>
        
        <!-- PDF Splitter Tool -->
        <div class="tool-section" id="splitter-section">
            <h2 class="section-title"><i class="fas fa-cut"></i> Split PDF File</h2>
            
            <div class="upload-area" id="split-upload-area">
                <div class="upload-icon"><i class="fas fa-file-pdf"></i></div>
                <p class="upload-text">Drag & drop a PDF file here or click to browse</p>
                <p style="color: var(--gray-color); margin-bottom: 20px;">Upload a single PDF file to split it into multiple documents</p>
                <input type="file" id="split-file-input" class="file-input" accept=".pdf">
                <label for="split-file-input" class="upload-btn">
                    <i class="fas fa-file-upload"></i> Select PDF File
                </label>
            </div>
            
            <div class="file-list" id="split-file-list">
                <!-- Single file will be shown here -->
            </div>
            
            <div class="options-section">
                <h3 class="option-title"><i class="fas fa-cogs"></i> Split Method</h3>
                
                <div class="split-options">
                    <div class="split-option">
                        <div class="option-btn active" data-split-method="range">
                            <div class="option-icon"><i class="fas fa-exchange-alt"></i></div>
                            <div class="option-name">Page Range</div>
                            <div class="option-desc">Extract specific page ranges from the PDF</div>
                        </div>
                    </div>
                    
                    <div class="split-option">
                        <div class="option-btn" data-split-method="size">
                            <div class="option-icon"><i class="fas fa-weight-hanging"></i></div>
                            <div class="option-name">By File Size</div>
                            <div class="option-desc">Split PDF into files of specific size</div>
                        </div>
                    </div>
                    
                    <div class="split-option">
                        <div class="option-btn" data-split-method="pages">
                            <div class="option-icon"><i class="fas fa-copy"></i></div>
                            <div class="option-name">By Page Count</div>
                            <div class="option-desc">Split PDF into files with specific page count</div>
                        </div>
                    </div>
                </div>
                
                <!-- Page Range Options -->
                <div class="range-container" id="range-options">
                    <p style="margin-bottom: 15px; color: var(--dark-color);">Specify the page ranges to extract (e.g., 1-5, 8, 11-15)</p>
                    
                    <div class="range-inputs">
                        <div class="range-input">
                            <label for="page-ranges">Page Ranges</label>
                            <input type="text" id="page-ranges" placeholder="e.g., 1-3, 5, 7-10">
                        </div>
                        
                        <div class="range-input">
                            <label for="split-interval">Split every <span id="interval-value">5</span> pages</label>
                            <input type="range" id="split-interval" min="1" max="20" value="5">
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; color: var(--gray-color); font-size: 0.9rem;">
                        <i class="fas fa-lightbulb"></i> Tip: Use commas to separate multiple ranges (1-5, 10-15) or single pages (3, 7, 9)
                    </div>
                </div>
                
                <!-- File Size Options -->
                <div class="range-container" id="size-options" style="display: none;">
                    <div class="range-inputs">
                        <div class="range-input">
                            <label for="max-file-size">Maximum File Size (MB)</label>
                            <input type="number" id="max-file-size" min="1" max="50" value="10">
                        </div>
                        
                        <div class="range-input">
                            <label>Estimated Output Files</label>
                            <div style="padding: 12px; background-color: #f0f3ff; border-radius: 8px; font-size: 1.2rem; font-weight: 600; text-align: center;" id="estimated-files">0</div>
                        </div>
                    </div>
                </div>
                
                <!-- Page Count Options -->
                <div class="range-container" id="pages-options" style="display: none;">
                    <div class="range-inputs">
                        <div class="range-input">
                            <label for="pages-per-file">Pages per File</label>
                            <input type="number" id="pages-per-file" min="1" max="50" value="5">
                        </div>
                        
                        <div class="range-input">
                            <label>Total Files</label>
                            <div style="padding: 12px; background-color: #f0f3ff; border-radius: 8px; font-size: 1.2rem; font-weight: 600; text-align: center;" id="total-files">0</div>
                        </div>
                    </div>
                </div>
                
                <div class="page-preview" id="page-preview">
                    <div class="preview-title">Page Split Preview</div>
                    <div class="page-markers" id="page-markers">
                        <!-- Page markers will be added here -->
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="primary-btn" id="split-btn">
                    <i class="fas fa-cut"></i> Split PDF Now
                </button>
                <button class="secondary-btn" id="clear-split-btn">
                    <i class="fas fa-redo"></i> Reset Options
                </button>
            </div>
        </div>
        
        <!-- Loader -->
        <div class="loader" id="loader">
            <div class="spinner"></div>
            <p class="loader-text" id="loader-text">Processing your PDF files...</p>
        </div>
        
        <!-- Results Section -->
        <div class="results-section" id="results-section">
            <h2 class="results-title"><i class="fas fa-check-circle"></i> Operation Successful!</h2>
            
            <div class="result-info" id="result-info">
                <!-- Results will be added here dynamically -->
            </div>
            
            <div class="download-options" id="download-options">
                <!-- Download buttons will be added here -->
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="secondary-btn" id="new-operation-btn">
                    <i class="fas fa-plus-circle"></i> Start New Operation
                </button>
            </div>
        </div>
        
        <footer>
            <div class="footer-note">
                <p><strong>Note:</strong> This is a demo tool. In a real implementation, you would use a PDF processing library like PDF.js, pdf-lib, or a server-side solution to handle actual PDF merging and splitting operations.</p>
                <p style="margin-top: 15px;">For production use, consider integrating with a reliable PDF processing service or implementing server-side processing for handling large files securely.</p>
            </div>
        </footer>
    </div>

    <script>
        // DOM Elements
        const toolTabs = document.querySelectorAll('.tool-tab');
        const toolSections = document.querySelectorAll('.tool-section');
        const mergeUploadArea = document.getElementById('merge-upload-area');
        const splitUploadArea = document.getElementById('split-upload-area');
        const mergeFileInput = document.getElementById('merge-file-input');
        const splitFileInput = document.getElementById('split-file-input');
        const mergeFileList = document.getElementById('merge-file-list');
        const splitFileList = document.getElementById('split-file-list');
        const mergeBtn = document.getElementById('merge-btn');
        const splitBtn = document.getElementById('split-btn');
        const clearMergeBtn = document.getElementById('clear-merge-btn');
        const clearSplitBtn = document.getElementById('clear-split-btn');
        const loader = document.getElementById('loader');
        const loaderText = document.getElementById('loader-text');
        const resultsSection = document.getElementById('results-section');
        const resultInfo = document.getElementById('result-info');
        const downloadOptions = document.getElementById('download-options');
        const newOperationBtn = document.getElementById('new-operation-btn');
        
        // Splitter elements
        const splitOptions = document.querySelectorAll('.split-option .option-btn');
        const rangeOptions = document.getElementById('range-options');
        const sizeOptions = document.getElementById('size-options');
        const pagesOptions = document.getElementById('pages-options');
        const splitInterval = document.getElementById('split-interval');
        const intervalValue = document.getElementById('interval-value');
        const pageRanges = document.getElementById('page-ranges');
        const maxFileSize = document.getElementById('max-file-size');
        const pagesPerFile = document.getElementById('pages-per-file');
        const estimatedFiles = document.getElementById('estimated-files');
        const totalFiles = document.getElementById('total-files');
        const pagePreview = document.getElementById('page-preview');
        const pageMarkers = document.getElementById('page-markers');
        
        // State variables
        let mergeFiles = [];
        let splitFile = null;
        let currentTool = 'merger';
        let splitMethod = 'range';
        let totalPages = 0;
        
        // Initialize the tool
        init();
        
        function init() {
            // Tool selection tabs
            toolTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tool = tab.dataset.tool;
                    switchTool(tool);
                });
            });
            
            // Merge file input
            mergeFileInput.addEventListener('change', (e) => {
                handleMergeFiles(e.target.files);
            });
            
            // Split file input
            splitFileInput.addEventListener('change', (e) => {
                handleSplitFile(e.target.files[0]);
            });
            
            // Drag and drop for merge
            setupDragAndDrop(mergeUploadArea, (files) => {
                handleMergeFiles(files);
            });
            
            // Drag and drop for split
            setupDragAndDrop(splitUploadArea, (files) => {
                if (files.length > 0) {
                    handleSplitFile(files[0]);
                }
            });
            
            // Merge button
            mergeBtn.addEventListener('click', processMerge);
            
            // Split button
            splitBtn.addEventListener('click', processSplit);
            
            // Clear buttons
            clearMergeBtn.addEventListener('click', clearMergeFiles);
            clearSplitBtn.addEventListener('click', clearSplitFile);
            
            // New operation button
            newOperationBtn.addEventListener('click', () => {
                resultsSection.classList.remove('show');
                if (currentTool === 'merger') {
                    clearMergeFiles();
                } else {
                    clearSplitFile();
                }
            });
            
            // Split method selection
            splitOptions.forEach(option => {
                option.addEventListener('click', () => {
                    splitOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    splitMethod = option.dataset.splitMethod;
                    showSplitOptions(splitMethod);
                });
            });
            
            // Split interval slider
            splitInterval.addEventListener('input', () => {
                intervalValue.textContent = splitInterval.value;
                updatePagePreview();
            });
            
            // Update estimated files when size changes
            maxFileSize.addEventListener('input', updateFileEstimates);
            pagesPerFile.addEventListener('input', updatePageCountEstimate);
            
            // Initialize
            showSplitOptions('range');
        }
        
        function switchTool(tool) {
            // Update tabs
            toolTabs.forEach(tab => {
                if (tab.dataset.tool === tool) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Update sections
            toolSections.forEach(section => {
                if (section.id === `${tool}-section`) {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });
            
            // Update current tool
            currentTool = tool;
            
            // Hide results if shown
            resultsSection.classList.remove('show');
        }
        
        function setupDragAndDrop(element, callback) {
            element.addEventListener('dragover', (e) => {
                e.preventDefault();
                element.classList.add('drag-over');
            });
            
            element.addEventListener('dragleave', () => {
                element.classList.remove('drag-over');
            });
            
            element.addEventListener('drop', (e) => {
                e.preventDefault();
                element.classList.remove('drag-over');
                
                const files = Array.from(e.dataTransfer.files).filter(file => 
                    file.type === 'application/pdf'
                );
                
                if (files.length > 0) {
                    callback(files);
                } else {
                    alert('Please drop PDF files only.');
                }
            });
        }
        
        function handleMergeFiles(fileList) {
            const newFiles = Array.from(fileList).filter(file => 
                file.type === 'application/pdf'
            );
            
            if (newFiles.length === 0) {
                alert('Please select PDF files only.');
                return;
            }
            
            // Add new files to the list
            mergeFiles = [...mergeFiles, ...newFiles];
            renderMergeFileList();
        }
        
        function handleSplitFile(file) {
            if (!file || file.type !== 'application/pdf') {
                alert('Please select a PDF file.');
                return;
            }
            
            splitFile = file;
            renderSplitFileList();
            
            // Simulate getting page count (in real app, use PDF.js to get actual count)
            totalPages = Math.floor(Math.random() * 50) + 10; // Random between 10-60
            updatePagePreview();
            updateFileEstimates();
            updatePageCountEstimate();
        }
        
        function renderMergeFileList() {
            mergeFileList.innerHTML = '';
            
            if (mergeFiles.length === 0) {
                mergeFileList.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--gray-color);"><i class="fas fa-folder-open" style="font-size: 2rem; margin-bottom: 10px;"></i><p>No files selected yet</p></div>';
                return;
            }
            
            mergeFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.draggable = true;
                fileItem.dataset.index = index;
                
                fileItem.innerHTML = `
                    <div class="file-info">
                        <div class="file-icon"><i class="fas fa-file-pdf"></i></div>
                        <div>
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${formatFileSize(file.size)}</div>
                        </div>
                    </div>
                    <div class="file-actions">
                        <button class="action-btn move-btn" title="Drag to reorder">
                            <i class="fas fa-arrows-alt"></i>
                        </button>
                        <button class="action-btn remove-btn" data-index="${index}" title="Remove file">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
                
                mergeFileList.appendChild(fileItem);
                
                // Add drag and drop for reordering
                fileItem.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', index);
                });
                
                fileItem.addEventListener('dragover', (e) => {
                    e.preventDefault();
                });
                
                fileItem.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const fromIndex = parseInt(e.dataTransfer.getData('text/plain'));
                    const toIndex = index;
                    
                    if (fromIndex !== toIndex) {
                        // Reorder files
                        const fileToMove = mergeFiles[fromIndex];
                        mergeFiles.splice(fromIndex, 1);
                        mergeFiles.splice(toIndex, 0, fileToMove);
                        renderMergeFileList();
                    }
                });
                
                // Add remove button event
                const removeBtn = fileItem.querySelector('.remove-btn');
                removeBtn.addEventListener('click', () => {
                    removeMergeFile(index);
                });
            });
            
            // Add drag and drop instructions
            const instructions = document.createElement('div');
            instructions.style.padding = '15px';
            instructions.style.textAlign = 'center';
            instructions.style.color = 'var(--gray-color)';
            instructions.style.fontSize = '0.9rem';
            instructions.innerHTML = '<i class="fas fa-info-circle"></i> Drag files to reorder the merge sequence';
            mergeFileList.appendChild(instructions);
        }
        
        function renderSplitFileList() {
            splitFileList.innerHTML = '';
            
            if (!splitFile) {
                splitFileList.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--gray-color);"><i class="fas fa-file-pdf" style="font-size: 2rem; margin-bottom: 10px;"></i><p>No file selected yet</p></div>';
                return;
            }
            
            const fileItem = document.createElement('div');
            fileItem.className = 'file-item';
            
            fileItem.innerHTML = `
                <div class="file-info">
                    <div class="file-icon"><i class="fas fa-file-pdf"></i></div>
                    <div>
                        <div class="file-name">${splitFile.name}</div>
                        <div class="file-size">${formatFileSize(splitFile.size)} â€¢ Estimated pages: ${totalPages}</div>
                    </div>
                </div>
                <div class="file-actions">
                    <button class="action-btn remove-btn" id="remove-split-file" title="Remove file">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            splitFileList.appendChild(fileItem);
            
            // Add remove button event
            document.getElementById('remove-split-file').addEventListener('click', clearSplitFile);
        }
        
        function removeMergeFile(index) {
            mergeFiles.splice(index, 1);
            renderMergeFileList();
        }
        
        function clearMergeFiles() {
            mergeFiles = [];
            renderMergeFileList();
            document.getElementById('output-filename').value = 'merged-document.pdf';
        }
        
        function clearSplitFile() {
            splitFile = null;
            renderSplitFileList();
            pagePreview.classList.remove('show');
            document.getElementById('page-ranges').value = '';
            document.getElementById('split-interval').value = 5;
            intervalValue.textContent = '5';
            document.getElementById('max-file-size').value = 10;
            document.getElementById('pages-per-file').value = 5;
        }
        
        function showSplitOptions(method) {
            // Hide all options
            rangeOptions.style.display = 'none';
            sizeOptions.style.display = 'none';
            pagesOptions.style.display = 'none';
            
            // Show selected option
            if (method === 'range') {
                rangeOptions.style.display = 'block';
                pagePreview.classList.add('show');
            } else if (method === 'size') {
                sizeOptions.style.display = 'block';
                pagePreview.classList.remove('show');
            } else if (method === 'pages') {
                pagesOptions.style.display = 'block';
                pagePreview.classList.add('show');
                updatePagePreview();
            }
        }
        
        function updatePagePreview() {
            if (!splitFile || totalPages === 0) return;
            
            pageMarkers.innerHTML = '';
            const interval = parseInt(splitInterval.value);
            
            for (let i = 1; i <= totalPages; i++) {
                const marker = document.createElement('div');
                marker.className = 'page-marker';
                marker.textContent = i;
                
                // Mark split points
                if (splitMethod === 'pages') {
                    const pagesPer = parseInt(pagesPerFile.value);
                    if (i % pagesPer === 1 && i !== 1) {
                        marker.classList.add('split');
                        marker.innerHTML = `${i} <i class="fas fa-scissors"></i>`;
                    }
                } else if (splitMethod === 'range' && i % interval === 0 && i !== totalPages) {
                    marker.classList.add('split');
                    marker.innerHTML = `${i} <i class="fas fa-scissors"></i>`;
                }
                
                pageMarkers.appendChild(marker);
            }
        }
        
        function updateFileEstimates() {
            if (!splitFile) {
                estimatedFiles.textContent = '0';
                return;
            }
            
            const sizeMB = parseInt(maxFileSize.value);
            const fileSizeMB = splitFile.size / (1024 * 1024);
            const estimated = Math.ceil(fileSizeMB / sizeMB);
            estimatedFiles.textContent = estimated;
        }
        
        function updatePageCountEstimate() {
            if (!splitFile || totalPages === 0) {
                totalFiles.textContent = '0';
                return;
            }
            
            const pagesPer = parseInt(pagesPerFile.value);
            const total = Math.ceil(totalPages / pagesPer);
            totalFiles.textContent = total;
            
            updatePagePreview();
        }
        
        function processMerge() {
            if (mergeFiles.length < 2) {
                alert('Please select at least 2 PDF files to merge.');
                return;
            }
            
            // Show loader
            loaderText.textContent = 'Merging PDF files...';
            loader.classList.add('show');
            
            // Simulate processing
            setTimeout(() => {
                // Hide loader
                loader.classList.remove('show');
                
                // Show results
                showMergeResults();
            }, 2000);
        }
        
        function processSplit() {
            if (!splitFile) {
                alert('Please select a PDF file to split.');
                return;
            }
            
            // Validate inputs based on method
            if (splitMethod === 'range') {
                const ranges = pageRanges.value.trim();
                if (!ranges && !splitInterval.value) {
                    alert('Please specify page ranges or use the interval splitter.');
                    return;
                }
            }
            
            // Show loader
            loaderText.textContent = 'Splitting PDF file...';
            loader.classList.add('show');
            
            // Simulate processing
            setTimeout(() => {
                // Hide loader
                loader.classList.remove('show');
                
                // Show results
                showSplitResults();
            }, 2000);
        }
        
        function showMergeResults() {
            // Calculate total size
            const totalSize = mergeFiles.reduce((sum, file) => sum + file.size, 0);
            const compressedSize = totalSize * 0.7; // Simulate 30% compression
            
            resultInfo.innerHTML = `
                <div class="info-box">
                    <div class="info-label">Files Merged</div>
                    <div class="info-value">${mergeFiles.length}</div>
                </div>
                <div class="info-box">
                    <div class="info-label">Original Size</div>
                    <div class="info-value">${formatFileSize(totalSize)}</div>
                </div>
                <div class="info-box">
                    <div class="info-label">Merged Size</div>
                    <div class="info-value">${formatFileSize(compressedSize)}</div>
                </div>
            `;
            
            const outputName = document.getElementById('output-filename').value || 'merged-document.pdf';
            
            downloadOptions.innerHTML = `
                <button class="download-btn">
                    <div class="download-info">
                        <div class="download-icon"><i class="fas fa-file-pdf"></i></div>
                        <div>
                            <div class="download-text">${outputName}</div>
                            <div class="download-size">${formatFileSize(compressedSize)}</div>
                        </div>
                    </div>
                    <div class="download-arrow"><i class="fas fa-download"></i></div>
                </button>
                <div style="text-align: center; color: var(--gray-color); font-size: 0.9rem; margin-top: 10px;">
                    <i class="fas fa-shield-alt"></i> Your files are processed securely in your browser
                </div>
            `;
            
            resultsSection.classList.add('show');
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        function showSplitResults() {
            let fileCount = 0;
            let description = '';
            
            if (splitMethod === 'range') {
                const ranges = pageRanges.value;
                if (ranges) {
                    // Count ranges
                    const rangeParts = ranges.split(',');
                    fileCount = rangeParts.length;
                    description = `${fileCount} range${fileCount > 1 ? 's' : ''} extracted`;
                } else {
                    const interval = parseInt(splitInterval.value);
                    fileCount = Math.ceil(totalPages / interval);
                    description = `Split every ${interval} pages`;
                }
            } else if (splitMethod === 'size') {
                const size = parseInt(maxFileSize.value);
                fileCount = parseInt(estimatedFiles.textContent);
                description = `Max ${size} MB per file`;
            } else if (splitMethod === 'pages') {
                const pagesPer = parseInt(pagesPerFile.value);
                fileCount = parseInt(totalFiles.textContent);
                description = `${pagesPer} pages per file`;
            }
            
            resultInfo.innerHTML = `
                <div class="info-box">
                    <div class="info-label">Files Created</div>
                    <div class="info-value">${fileCount}</div>
                </div>
                <div class="info-box">
                    <div class="info-label">Original File</div>
                    <div class="info-value">${splitFile.name}</div>
                </div>
                <div class="info-box">
                    <div class="info-label">Split Method</div>
                    <div class="info-value" style="font-size: 1.5rem;">${description}</div>
                </div>
            `;
            
            downloadOptions.innerHTML = '';
            
            // Create download buttons for each split file
            for (let i = 1; i <= fileCount; i++) {
                let fileName = '';
                if (splitMethod === 'range' && pageRanges.value) {
                    const rangeParts = pageRanges.value.split(',');
                    fileName = `pages-${rangeParts[i-1].trim().replace('-', 'to')}.pdf`;
                } else {
                    fileName = `part-${i}.pdf`;
                }
                
                // Simulate file size (smaller than original)
                const fileSize = splitFile.size / fileCount * (0.8 + Math.random() * 0.4);
                
                const downloadBtn = document.createElement('button');
                downloadBtn.className = 'download-btn';
                downloadBtn.innerHTML = `
                    <div class="download-info">
                        <div class="download-icon"><i class="fas fa-file-pdf"></i></div>
                        <div>
                            <div class="download-text">${fileName}</div>
                            <div class="download-size">${formatFileSize(fileSize)}</div>
                        </div>
                    </div>
                    <div class="download-arrow"><i class="fas fa-download"></i></div>
                `;
                
                downloadOptions.appendChild(downloadBtn);
            }
            
            // Add zip download option
            const zipDownload = document.createElement('button');
            zipDownload.className = 'download-btn';
            zipDownload.style.marginTop = '20px';
            zipDownload.style.backgroundColor = 'var(--accent-color)';
            zipDownload.style.color = 'white';
            zipDownload.innerHTML = `
                <div class="download-info">
                    <div class="download-icon"><i class="fas fa-file-archive"></i></div>
                    <div>
                        <div class="download-text">Download All as ZIP</div>
                        <div class="download-size">${formatFileSize(splitFile.size * 0.9)}</div>
                    </div>
                </div>
                <div class="download-arrow"><i class="fas fa-download"></i></div>
            `;
            
            downloadOptions.appendChild(zipDownload);
            
            resultsSection.classList.add('show');
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    </script>
</body>
</html>
